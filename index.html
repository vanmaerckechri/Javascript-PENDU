<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Le Pendu</title>
</head>

<style>
	html
	{
		min-height: 100%;
	}
	body
	{
		margin: 0;
		min-height: 100vh;
		display: flex;
		justify-content: center;
		align-items: center;
		background-color: black;
		color: white;
	}
	#main
	{
		min-width: 400px;
		min-height: 600px;
	}
	section
	{
		border-bottom: 1px solid white;	
	}
	input
	{
	}
	h2
	{
		width: 100%;
	}
	#input
	{
		display: flex;
		justify-content: space-between;
		flex-wrap: wrap;
	}
	#mot
	{
		color: green;
	}
	#lettresInva
	{
		color: red;
	}
	#essais
	{
		color: pink;
	}

</style>

<body onKeyPress="if (event.keyCode == 13) proposition()">
	<div id="main">
		<section>
			<H2>Le Mot:</H2>
			<p id="mot"></p>
		</section>
		<section>
			<H2>Lettres Invalides:</H2>
			<p id="lettresInva"></p>
		</section>
		<section>
			<H2>Vies: <span id="essais"></span></H2>
		</section>
		<section id="input">
  			<h2>Proposez une lettre: </h2>
  			<input id="propo" type="text">
  			<input type="button" onclick="proposition()" value="Submit">
		</section>
		<section>
			<H2>Informations:</H2>
			<p id="comIA"></p>
		</section>
	</div>

<script>
/* ----------------------------------------INIT---------------------------------------- */
var dictionnaire = ['BONJOUR', 'PARTOUT', 'COMMENT', 'MANGER', 'PARTIR', 'FATIGUE', 'INFORMATIQUE', 'TESTER', 'CHAPEAU', 'RENFORCER', 'CORDE', 'CHAUSSURES'];
var motSecret;
var lettreProposition;
var lettresInvalides = [];
var chanceNombre = 9;
var resultat = 0;
var victoire = 0;
var aideNbrLettre;
/* Choisir un mot au hasard */
var randomNum = Math.floor(Math.random()*dictionnaire.length);
var motSecret = dictionnaire[randomNum];
/* Initialisation du mot, remplacement des lettres par des "-" */
var motProposition = new Array(motSecret.length);
for (i = 0; motProposition.length > i; i++)
{
	motProposition[i] = "-";
}
document.getElementById('mot').innerHTML = motProposition.join(' '); /* Affichage du nombre de lettres par les "-" */
/* Afficher quelques lettres avant le commencement de la partie */
aideNbrLettre = Math.round((motSecret.length / 3));
while (aideNbrLettre > 0)
{
	var randomNum = Math.floor(Math.random()*motSecret.length);
	while (motProposition[randomNum] != "-")
	{
		var randomNum = Math.floor(Math.random()*motSecret.length);;
	}
	var lettreProposition = motSecret[randomNum];
	verifLettre();
	aideNbrLettre--;
	document.getElementById("comIA").innerHTML = "";
}

/* ------------------------------"BOUCLE" PRINCIPALE------------------------------ */
/* Stockage de la lettre proposée par le joueur */
function proposition()
{
	if (chanceNombre > 0 && aideNbrLettre <= 0) 
 	{
 		lettreProposition = document.getElementById("propo").value;
  		verifType(lettreProposition);
	}
}
/* Lettre proposée est-elle correct ? => UNE SEULE LETTRE et rien d'autre */
function verifType(lettre) {
	if (lettre != "") /* proposition existe-elle ? */
  	{
  		if (isNaN(lettre) === true) /* est-elle une lettre ? */
  		{
  			if (lettre.length == 1) /* n'y a-t-il qu'une seule lettre ? */
  			{
  				verifLettre();
  			}
  		}
  	}
}
/* On verifie que la lettre proposée soit différente des lettres composant le mot secret et étant déjà proposées */
function verifLettre()
{
  	lettreProposition = lettreProposition.toUpperCase(); /* Transformer lettre minuscule en majuscule */
  	for (i = 0; i < motSecret.length; i++)
  	{
	    if (lettreProposition == motProposition[i])
	    {
	    	document.getElementById("comIA").style.color = "#FF8C00";
	    	document.getElementById("propo").value = "";
	  		document.getElementById("propo").focus();
	      	document.getElementById("comIA").innerHTML = "cette lettre a déjà été proposée";
	      	return;
	    }
	}
  	comparLettreInvalides(lettreProposition);
}
/* On verifie que la lettre proposée soit différente des lettres ivalides étant déjà proposées */
function comparLettreInvalides(lettre)
{
  	for (i = 0; i < lettresInvalides.length; i++)
	{
    	if (lettre == lettresInvalides[i])
    	{
    		document.getElementById("comIA").style.color = "#FF8C00";
    		document.getElementById("propo").value = "";
  			document.getElementById("propo").focus();
      		document.getElementById("comIA").innerHTML = "cette lettre a déjà été proposée";
     		return;
    	}
  	}
 	lettreExiste(lettre);
}
/* La lettre proposée compose-t-elle le mot secret */
function lettreExiste(lettre) {
  for (i = 0; i < motSecret.length; i++) {
    if (lettre == motSecret[i]) {
      motProposition[i] = lettre;
      resultat = 1;
      victoire++;
      aideNbrLettre--;
    }
  }
  afficheResultat(lettre);
}
/* Affichage du résultat de la lettre */
function afficheResultat(lettre) {
  if (resultat == 1)
  {
  	document.getElementById('mot').innerHTML = motProposition.join(' ');
  	document.getElementById("comIA").style.color = "green";
    document.getElementById("comIA").innerHTML = "Bonne Proposition";
  }
  else
  {
    chanceNombre--;
    lettresInvalides.push(lettre);
    document.getElementById('lettresInva').innerHTML += lettre+" -";
    document.getElementById("comIA").style.color = "red";
    document.getElementById("comIA").innerHTML = "Mauvaise proposition";
  }
  document.getElementById('essais').innerHTML = chanceNombre;
  document.getElementById("propo").value = "";
  document.getElementById("propo").focus();
  resultat = 0;
  victoireDefaite();
}
/* FINAL => VICTOIRE / DEFAITE */
function victoireDefaite()
{
	if (chanceNombre == 0)
	{
		document.getElementById("comIA").style.color = "red";
		document.getElementById("comIA").innerHTML = "DEFAITE";
	}
	if (victoire == motSecret.length)
	{
		document.getElementById("comIA").style.color = "green";
		document.getElementById("comIA").innerHTML = "VICTOIRE";
		chanceNombre = 0;
	}
}
</script>
</body>
</html>